<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vidya Portal Website</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .header {
            background: #3c8dbc;
            color: white;
            padding: 20px 0;
            position: relative;
            min-height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .header-content {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            padding: 0 20px;
        }
        
        .logo {
            position: absolute;
            top: 10px;
            left: 20px;
        }
        
        .logo img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .college-name {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .tagline {
            font-size: 1.2rem;
            font-style: italic;
        }
        
        .nav {
            background: #1a4f8c;
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .nav ul {
            display: flex;
            justify-content: center;
            list-style: none;
            flex-wrap: wrap;
        }
        
        .nav ul li {
            margin: 0 15px;
        }
        
        .nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            padding: 8px 15px;
            border-radius: 4px;
            transition: background 0.3s;
        }
        
        .nav ul li a:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .main-content {
            padding: 30px 20px;
            max-width: 1200px;
            margin: 0 auto;
            min-height: 60vh;
        }
        
        .welcome-section {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .welcome-section h2 {
            color: #1a4f8c;
            font-size: 2rem;
            margin-bottom: 15px;
        }
        
        .welcome-section p {
            font-size: 1.1rem;
            color: #555;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .news-section {
            background: #f5f5f5;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .news-section h3 {
            color: #1a4f8c;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3c8dbc;
        }
        
        .news-section ul {
            list-style-type: none;
        }
        
        .news-section ul li {
            padding: 10px 0;
            border-bottom: 1px dashed #ddd;
            position: relative;
            padding-left: 25px;
        }
        
        .news-section ul li:before {
            content: "â€¢";
            color: #3c8dbc;
            font-size: 1.5rem;
            position: absolute;
            left: 0;
            top: 5px;
        }
        
        .footer {
            background: #1a4f8c;
            color: white;
            text-align: center;
            padding: 25px 20px;
            margin-top: 30px;
        }
        
        .footer p {
            margin: 5px 0;
        }
        
        /* Login Page Styles */
        .login-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .login-box {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 400px;
            position: relative;
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .login-header h2 {
            color: #1a4f8c;
            margin-bottom: 10px;
        }
        
        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #555;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: bold;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .login-btn {
            background-color: #3c8dbc;
            color: white;
            border: none;
            padding: 12px;
            width: 100%;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .login-btn:hover {
            background-color: #1a4f8c;
        }
        
        .forgot-password {
            text-align: center;
            margin-top: 15px;
        }
        
        .forgot-password a {
            color: #3c8dbc;
            text-decoration: none;
        }
        
        /* Dashboard Common Styles */
        .student-dashboard, .faculty-dashboard, .admin-dashboard {
            display: none;
            width: 100%;
            min-height: 100vh;
            background-color: #f9f9f9;
        }
        
        .dashboard-header {
            background: linear-gradient(135deg, #1a4f8c, #3c8dbc);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .dashboard-header .logo {
            position: relative;
            top: 0;
            left: 0;
            display: flex;
            align-items: center;
        }
        
        .dashboard-header .logo i {
            font-size: 2rem;
            margin-right: 10px;
        }
        
        .dashboard-header .logo h1 {
            font-size: 1.5rem;
            margin: 0;
        }
        
        .dashboard-container {
            display: flex;
            min-height: calc(100vh - 70px);
        }
        
        .dashboard-sidebar {
            width: 250px;
            background: #333;
            color: white;
            height: calc(100vh - 70px);
            overflow-y: auto;
            position: sticky;
            top: 70px;
            flex-shrink: 0;
        }
        
        .dashboard-main {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            height: calc(100vh - 70px);
        }
        
        .user-info {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin: 15px;
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 20px 0;
        }
        
        .sidebar-menu li {
            margin-bottom: 5px;
        }
        
        .sidebar-menu a {
            display: block;
            color: #ddd;
            padding: 12px 20px;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 15px;
        }
        
        .sidebar-menu a:hover {
            background-color: #444;
            color: white;
        }
        
        .sidebar-menu a.active {
            background-color: #3c8dbc;
            color: white;
        }
        
        .sidebar-menu i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        .welcome-banner {
            background: linear-gradient(to right, #3c8dbc, #1a4f8c);
            color: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            padding: 20px;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        
        .card h3 {
            color: #1a4f8c;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .info-group {
            margin-bottom: 15px;
        }
        
        .info-group label {
            font-weight: 600;
            color: #333;
            display: block;
            margin-bottom: 5px;
        }
        
        .info-group span {
            color: #555;
        }
        
        .back-to-home {
            background: white;
            color: #1a4f8c;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        
        /* Table Styles for Faculty and Admin */
        .table-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            padding: 20px;
            margin-bottom: 25px;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background-color: #f5f5f5;
            font-weight: 600;
            color: #333;
        }
        
        tr:hover {
            background-color: #f9f9f9;
        }
        
        .btn {
            display: inline-block;
            padding: 8px 15px;
            background: #3c8dbc;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .btn:hover {
            background: #1a4f8c;
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        .btn-danger {
            background: #dc3545;
        }
        
        .btn-danger:hover {
            background: #c82333;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover {
            background: #e0a800;
        }
        
        .attendance-check, .row-check {
            transform: scale(1.3);
            margin-right: 10px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-bottom: none;
            margin-right: 5px;
            border-top-left-radius: 4px;
            border-top-right-radius: 4px;
        }
        
        .tab.active {
            background: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
            font-weight: 600;
            color: #1a4f8c;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Status Badges */
        .status-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status-approved {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        /* Admin Specific Styles */
        .backup-card {
            text-align: center;
            padding: 30px;
        }
        
        .backup-icon {
            font-size: 48px;
            color: #1a4f8c;
            margin-bottom: 20px;
        }
        
        .backup-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                min-height: 150px;
                padding: 15px 0;
            }
            
            .logo {
                position: static;
                text-align: center;
                margin-bottom: 15px;
            }
            
            .logo img {
                width: 100px;
                height: 100px;
            }
            
            .college-name {
                font-size: 2rem;
            }
            
            .tagline {
                font-size: 1rem;
            }
            
            .nav ul {
                flex-direction: column;
                align-items: center;
            }
            
            .nav ul li {
                margin: 5px 0;
            }
            
            .main-content {
                padding: 20px 15px;
            }
            
            .login-box {
                padding: 20px;
                margin: 20px;
            }
            
            .dashboard-container {
                flex-direction: column;
            }
            
            .dashboard-sidebar {
                width: 100%;
                height: auto;
                position: relative;
                top: 0;
            }
            
            .dashboard-main {
                height: auto;
            }
            
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .dashboard-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                margin-bottom: 5px;
                border-radius: 4px;
                border: 1px solid #ddd;
            }
            
            .tab.active {
                border-bottom: 1px solid #ddd;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Main College Website -->
    <div id="college-website">
        <!-- Header Section -->
        <header class="header">
            <div class="logo">
                <img src="VidyaPortallogo.png" style="width: 200px; height: 200px; border-radius: 50%;">
            </div>
            <div class="header-content">
                <h1 class="college-name">ðŸŽ“ Vidya Portal</h1>
                <p class="tagline">Excellence in Education Since 1990</p>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <ul>
                <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                <li><a href="#" class="nav-link" data-page="about">About</a></li>
                <li><a href="#" class="nav-link" data-page="courses">Courses</a></li>
                <li><a href="#" class="nav-link" data-page="admissions">Admissions</a></li>
                <li><a href="#" class="nav-link" data-page="contact">Contact</a></li>
                <li><a href="#" class="nav-link" data-page="payment">Payment</a></li>
                <li><a href="#" class="login-link">Login</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="welcome-section">
                <h2>Welcome to Vidya Portal</h2>
                <p>Vidya Portal is a premier educational institution dedicated to providing quality education and fostering holistic development of students. With over three decades of excellence, we continue to shape future leaders.</p>
            </div>
            
            <div class="news-section">
                <h3>Latest News & Announcements</h3>
                <ul>
                    <li>Admissions open for 2025-26 academic session</li>
                    <li>New courses launched in Computer Science and Business Administration</li>
                    <li>Annual college festival 'Vidya Utsav' scheduled for next month</li>
                    <li>Scholarship applications now being accepted for meritorious students</li>
                    <li>Workshop on career guidance and placement preparation</li>
                </ul>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Â© 2024 My College. Sabhi rights reserved.</p>
            <p>Contact: college@email.com | Phone: 0123-456789</p>
        </footer>

        <!-- Login Page -->
        <div class="login-container" id="loginContainer">
            <div class="login-box">
                <span class="close-btn" id="closeLogin">&times;</span>
                <div class="login-header">
                    <h2>Login to Vidya Portal</h2>
                    <p>Enter your credentials to access your account</p>
                </div>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="user-type">Login As</label>
                        <select id="user-type" name="user-type" required>
                            <option value="">Select User Type</option>
                            <option value="student">Student</option>
                            <option value="faculty">Faculty</option>
                            <option value="admin">Administrator</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="username">User ID / Email</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="login-btn">Login</button>
                </form>
                <div class="forgot-password">
                    <a href="#">Forgot Password?</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Dashboard (Hidden by default) -->
    <div class="student-dashboard" id="studentDashboard">
        <header class="dashboard-header">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <h1>VidyaPortal - Student Dashboard</h1>
            </div>
            <button class="back-to-home" id="backToHomeStudent">Home</button>
        </header>
        
        <div class="dashboard-container">
            <aside class="dashboard-sidebar">
                <div class="user-info">
                    <h3>Rahul Sharma</h3>
                    <p>ID: STU20235001</p>
                </div>
                
                <ul class="sidebar-menu">
                    <li><a href="#" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="#"><i class="fas fa-user-graduate"></i> Academic Profile</a></li>
                    <li><a href="#"><i class="fas fa-calendar-alt"></i> Timetable</a></li>
                    <li><a href="#"><i class="fas fa-book"></i> Courses</a></li>
                    <li><a href="#"><i class="fas fa-clipboard-check"></i> Attendance</a></li>
                    <li><a href="#"><i class="fas fa-chart-bar"></i> Results</a></li>
                    <li><a href="#"><i class="fas fa-file-invoice-dollar"></i> Fees</a></li>
                    <li><a href="#"><i class="fas fa-book-open"></i> Library</a></li>
                    <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
                    <li><a href="#" id="studentLogoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
            </aside>
            
            <main class="dashboard-main">
                <div class="welcome-banner">
                    <h2>Welcome, Rahul Sharma!</h2>
                    <p>Here you can access all your academic information, services, and resources in one place.</p>
                </div>

                <div class="dashboard-cards">
                    <div class="card">
                        <h3>Academic Details</h3>
                        <div class="info-group">
                            <label>Course</label>
                            <span>Bachelor of Computer Applications (BCA)</span>
                        </div>
                        <div class="info-group">
                            <label>Semester</label>
                            <span>4th Semester</span>
                        </div>
                        <div class="info-group">
                            <label>Batch</label>
                            <span>2023-2026</span>
                        </div>
                        <div class="info-group">
                            <label>Class Advisor</label>
                            <span>Dr. Priya Mehta</span>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Personal Details</h3>
                        <div class="info-group">
                            <label>Date of Birth</label>
                            <span>15 March 2004</span>
                        </div>
                        <div class="info-group">
                            <label>Email</label>
                            <span>rahul.sharma@example.com</span>
                        </div>
                        <div class="info-group">
                            <label>Phone</label>
                            <span>+91 9876543210</span>
                        </div>
                        <div class="info-group">
                            <label>Address</label>
                            <span>123 Main Street, Mumbai</span>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Attendance Summary</h3>
                        <div class="info-group">
                            <label>Overall Attendance</label>
                            <span>85%</span>
                        </div>
                        <div class="info-group">
                            <label>Present Days</label>
                            <span>102</span>
                        </div>
                        <div class="info-group">
                            <label>Absent Days</label>
                            <span>18</span>
                        </div>
                        <div class="info-group">
                            <label>Last Updated</label>
                            <span>15 August 2025</span>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Upcoming Events</h3>
                        <div class="info-group">
                            <label>Mid-Term Exams</label>
                            <span>25 October 2025</span>
                        </div>
                        <div class="info-group">
                            <label>Project Submission</label>
                            <span>5 NOvember 2025</span>
                        </div>
                        <div class="info-group">
                            <label>College Fest</label>
                            <span>15-17 October 2025</span>
                        </div>
                        <div class="info-group">
                            <label>Semester End</label>
                            <span>30 December 2025</span>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Faculty Dashboard (Hidden by default) -->
    <div class="faculty-dashboard" id="facultyDashboard">
        <header class="dashboard-header">
            <div class="logo">
                <i class="fas fa-chalkboard-teacher"></i>
                <h1>VidyaPortal - Faculty Dashboard</h1>
            </div>
            <button class="back-to-home" id="backToHomeFaculty">Home</button>
        </header>
        
        <div class="dashboard-container">
            <aside class="dashboard-sidebar">
                <div class="user-info">
                    <h3>Prof. Rajesh Sharma</h3>
                    <p>ID: FAC2023501</p>
                    <p>Department: Computer Science</p>
                </div>
                
                <ul class="sidebar-menu">
                    <li><a href="#" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="#"><i class="fas fa-calendar-alt"></i> Attendance</a></li>
                    <li><a href="#"><i class="fas fa-tasks"></i> Assignments</a></li>
                    <li><a href="#"><i class="fas fa-book"></i> Study Material</a></li>
                    <li><a href="#"><i class="fas fa-clipboard-list"></i> Exams</a></li>
                    <li><a href="#"><i class="fas fa-chart-line"></i> Results</a></li>
                    <li><a href="#"><i class="fas fa-users"></i> Students</a></li>
                    <li><a href="#"><i class="fas fa-clock"></i> Timetable</a></li>
                    <li><a href="#"><i class="fas fa-bell"></i> Notices</a></li>
                    <li><a href="#" id="facultyLogoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
            </aside>
            
            <main class="dashboard-main">
                <div class="welcome-banner">
                    <h2>Welcome, Professor Sharma!</h2>
                    <p>Today is Friday, September 26, 2025. You have 3 classes scheduled today.</p>
                </div>

                <!-- Tabs for different functionalities -->
                <div class="tabs">
                    <div class="tab active" data-tab="attendance">Mark Attendance</div>
                    <div class="tab" data-tab="assignment">Create Assignment</div>
                    <div class="tab" data-tab="students">Student Management</div>
                    <div class="tab" data-tab="reports">Reports</div>
                </div>

                <!-- Attendance Tab -->
                <div class="tab-content active" id="attendance">
                    <div class="card">
                        <h3>Mark Attendance for BCA-4A</h3>
                        <div class="form-group">
                            <label for="attendance-date">Date</label>
                            <input type="date" id="attendance-date" value="2025-10-15">
                        </div>
                        <div class="form-group">
                            <label for="attendance-subject">Subject</label>
                            <select id="attendance-subject">
                                <option value="dbms">Database Management Systems</option>
                                <option value="java">Java Programming</option>
                                <option value="web">Web Technologies</option>
                                <option value="maths">Mathematics</option>
                            </select>
                        </div>
                    </div>

                    <div class="table-container">
                        <h3>Student List</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Roll No</th>
                                    <th>Student Name</th>
                                    <th>Present</th>
                                    <th>Absent</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>BCA2023001</td>
                                    <td>Aarav Sharma</td>
                                    <td><input type="radio" name="attendance1" class="attendance-check" checked></td>
                                    <td><input type="radio" name="attendance1" class="attendance-check"></td>
                                </tr>
                                <tr>
                                    <td>BCA2023002</td>
                                    <td>Priya Patel</td>
                                    <td><input type="radio" name="attendance2" class="attendance-check" checked></td>
                                    <td><input type="radio" name="attendance2" class="attendance-check"></td>
                                </tr>
                                <tr>
                                    <td>BCA2023003</td>
                                    <td>Rahul Singh</td>
                                    <td><input type="radio" name="attendance3" class="attendance-check"></td>
                                    <td><input type="radio" name="attendance3" class="attendance-check" checked></td>
                                </tr>
                            </tbody>
                        </table>
                        <br>
                        <button class="btn btn-success">Submit Attendance</button>
                    </div>
                </div>

                <!-- Assignment Tab -->
                <div class="tab-content" id="assignment">
                    <div class="card">
                        <h3>Create New Assignment</h3>
                        <div class="form-group">
                            <label for="assignment-title">Assignment Title</label>
                            <input type="text" id="assignment-title" placeholder="Enter assignment title">
                        </div>
                        <div class="form-group">
                            <label for="assignment-subject">Subject</label>
                            <select id="assignment-subject">
                                <option value="dbms">Database Management Systems</option>
                                <option value="java">Java Programming</option>
                                <option value="web">Web Technologies</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="assignment-class">Class</label>
                            <select id="assignment-class">
                                <option value="bca4a">BCA-4A</option>
                                <option value="bca4b">BCA-4B</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="assignment-due">Due Date</label>
                            <input type="date" id="assignment-due">
                        </div>
                        <button class="btn btn-success">Create Assignment</button>
                    </div>
                </div>

                <!-- Students Tab -->
                <div class="tab-content" id="students">
                    <div class="table-container">
                        <h3>Student List - BCA-4A</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Roll No</th>
                                    <th>Student Name</th>
                                    <th>Email</th>
                                    <th>Attendance %</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>BCA2023001</td>
                                    <td>Aarav Sharma</td>
                                    <td>aarav@example.com</td>
                                    <td>92%</td>
                                    <td><button class="btn">View Profile</button></td>
                                </tr>
                                <tr>
                                    <td>BCA2023002</td>
                                    <td>Priya Patel</td>
                                    <td>priya@example.com</td>
                                    <td>88%</td>
                                    <td><button class="btn">View Profile</button></td>
                                </tr>
                                <tr>
                                    <td>BCA2023003</td>
                                    <td>Rahul Singh</td>
                                    <td>rahul@example.com</td>
                                    <td>75%</td>
                                    <td><button class="btn">View Profile</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Reports Tab -->
                <div class="tab-content" id="reports">
                    <div class="dashboard-cards">
                        <div class="card">
                            <h3>Attendance Summary</h3>
                            <div class="info-group">
                                <label>BCA-4A Overall Attendance</label>
                                <span>87.5%</span>
                            </div>
                            <div class="info-group">
                                <label>This Month Average</label>
                                <span>89.2%</span>
                            </div>
                            <button class="btn">Generate Full Report</button>
                        </div>

                        <div class="card">
                            <h3>Assignment Status</h3>
                            <div class="info-group">
                                <label>Total Assignments</label>
                                <span>12</span>
                            </div>
                            <div class="info-group">
                                <label>Average Submission Rate</label>
                                <span>82.3%</span>
                            </div>
                            <button class="btn">View Details</button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Admin Dashboard (Hidden by default) -->
    <div class="admin-dashboard" id="adminDashboard">
        <header class="dashboard-header">
            <div class="logo">
                <i class="fas fa-user-cog"></i>
                <h1>VidyaPortal - Admin Dashboard</h1>
            </div>
            <button class="back-to-home" id="backToHomeAdmin">Home</button>
        </header>
        
        <div class="dashboard-container">
            <aside class="dashboard-sidebar">
                <div class="user-info">
                    <h3>Admin User</h3>
                    <p>ID: ADM2023001</p>
                    <p>Role: Super Administrator</p>
                </div>
                
                <ul class="sidebar-menu">
                    <li><a href="#" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                    <li><a href="#"><i class="fas fa-check-circle"></i> Approvals</a></li>
                    <li><a href="#"><i class="fas fa-users-cog"></i> User Management</a></li>
                    <li><a href="#"><i class="fas fa-cog"></i> System Management</a></li>
                    <li><a href="#"><i class="fas fa-database"></i> Backup & Restore</a></li>
                    <li><a href="#"><i class="fas fa-chart-line"></i> Reports & Analytics</a></li>
                    <li><a href="#"><i class="fas fa-bell"></i> Notifications</a></li>
                    <li><a href="#" id="adminLogoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
            </aside>
            
            <main class="dashboard-main">
                <div class="welcome-banner">
                    <h2>Welcome, Administrator!</h2>
                    <p>Today is Friday, September 26, 2025. You have 12 pending approvals and 3 system notifications.</p>
                </div>

                <!-- Tabs for different functionalities -->
                <div class="tabs">
                    <div class="tab active" data-tab="approvals">Pending Approvals</div>
                    <div class="tab" data-tab="management">User Management</div>
                    <div class="tab" data-tab="backup">Backup & Restore</div>
                    <div class="tab" data-tab="reports">Reports</div>
                </div>

                <!-- Approvals Tab -->
                <div class="tab-content active" id="approvals">
                    <div class="table-container">
                        <h3>Pending Student Registrations</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Select</th>
                                    <th>Application ID</th>
                                    <th>Student Name</th>
                                    <th>Course</th>
                                    <th>Applied On</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><input type="checkbox" class="row-check"></td>
                                    <td>APP20230001</td>
                                    <td>Aarav Sharma</td>
                                    <td>BCA</td>
                                    <td>2025-10-12</td>
                                    <td><span class="status-badge status-pending">Pending</span></td>
                                    <td>
                                        <button class="btn btn-success">Approve</button>
                                        <button class="btn btn-danger">Reject</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td><input type="checkbox" class="row-check"></td>
                                    <td>APP20230002</td>
                                    <td>Priya Patel</td>
                                    <td>B.Com</td>
                                    <td>2025-10-13</td>
                                    <td><span class="status-badge status-pending">Pending</span></td>
                                    <td>
                                        <button class="btn btn-success">Approve</button>
                                        <button class="btn btn-danger">Reject</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <br>
                        <div class="form-group">
                            <button class="btn btn-success">Approve Selected</button>
                            <button class="btn btn-danger">Reject Selected</button>
                            <button class="btn">View All Applications</button>
                        </div>
                    </div>
                </div>

                <!-- Management Tab -->
                <div class="tab-content" id="management">
                    <div class="card">
                        <h3>Add New User</h3>
                        <div class="form-group">
                            <label for="admin-user-type">User Type</label>
                            <select id="admin-user-type">
                                <option value="student">Student</option>
                                <option value="faculty">Faculty</option>
                                <option value="admin">Administrator</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="admin-user-name">Full Name</label>
                            <input type="text" id="admin-user-name" placeholder="Enter full name">
                        </div>
                        <div class="form-group">
                            <label for="admin-user-email">Email Address</label>
                            <input type="email" id="admin-user-email" placeholder="Enter email address">
                        </div>
                        <button class="btn btn-success">Create User</button>
                    </div>

                    <div class="table-container">
                        <h3>User Management</h3>
                        <div class="form-group">
                            <input type="text" placeholder="Search users by name, ID, or email">
                            <button class="btn">Search</button>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>User ID</th>
                                    <th>Name</th>
                                    <th>Role</th>
                                    <th>Status</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>STU2023001</td>
                                    <td>Aarav Sharma</td>
                                    <td>Student</td>
                                    <td><span class="status-badge status-approved">Active</span></td>
                                    <td>
                                        <button class="btn">Edit</button>
                                        <button class="btn btn-danger">Deactivate</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>FAC2023001</td>
                                    <td>Dr. Sunil Kumar</td>
                                    <td>Faculty</td>
                                    <td><span class="status-badge status-approved">Active</span></td>
                                    <td>
                                        <button class="btn">Edit</button>
                                        <button class="btn btn-danger">Deactivate</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Backup Tab -->
                <div class="tab-content" id="backup">
                    <div class="dashboard-cards">
                        <div class="card backup-card">
                            <div class="backup-icon">
                                <i class="fas fa-database"></i>
                            </div>
                            <h3>System Backup</h3>
                            <p>Create a complete backup of the system database and files.</p>
                            <div class="form-group">
                                <label for="backup-name">Backup Name</label>
                                <input type="text" id="backup-name" placeholder="Enter backup name">
                            </div>
                            <div class="backup-options">
                                <button class="btn btn-success"><i class="fas fa-download"></i> Create Backup</button>
                                <button class="btn btn-warning"><i class="fas fa-upload"></i> Restore</button>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Backup Settings</h3>
                            <div class="form-group">
                                <label for="auto-backup">Automatic Backup</label>
                                <select id="auto-backup">
                                    <option value="disabled">Disabled</option>
                                    <option value="daily">Daily</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="backup-time">Backup Time (if automatic)</label>
                                <input type="time" id="backup-time" value="02:00">
                            </div>
                            <button class="btn">Save Settings</button>
                        </div>
                    </div>
                </div>

                <!-- Reports Tab -->
                <div class="tab-content" id="reports">
                    <div class="dashboard-cards">
                        <div class="card">
                            <h3>System Reports</h3>
                            <div class="info-group">
                                <label>Total Users</label>
                                <span>1,245</span>
                            </div>
                            <div class="info-group">
                                <label>Active Students</label>
                                <span>985</span>
                            </div>
                            <div class="info-group">
                                <label>Faculty Members</label>
                                <span>75</span>
                            </div>
                            <button class="btn">Generate Full Report</button>
                        </div>

                        <div class="card">
                            <h3>Recent Activities</h3>
                            <div class="info-group">
                                <label>Pending Approvals</label>
                                <span>12 requests</span>
                            </div>
                            <div class="info-group">
                                <label>New Registrations</label>
                                <span>24 today</span>
                            </div>
                            <div class="info-group">
                                <label>System Logs</label>
                                <span>1,243 entries today</span>
                            </div>
                            <button class="btn">View Activity Log</button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
<script>
// âœ… YAHAN NAYA URL DALEN:
const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwJsR27ynT4ww3lb4i4Sxvw6RBkDeEKBWcFltGHErFu1IUaxb4ffGV80Ry0ZBtNBoIsCg/exec';

let currentStudent = null;

// âœ… ALL DATA FETCHING FUNCTIONS
async function fetchStudentData(studentId, dataType) {
    try {
        const url = `${APPS_SCRIPT_URL}?action=get${dataType}&studentId=${encodeURIComponent(studentId)}`;
        console.log(`Fetching ${dataType} data:`, url);
        
        const response = await fetch(url);
        const result = await response.json();
        console.log(`${dataType} Data:`, result);
        return result;
        
    } catch (error) {
        console.error(`Error fetching ${dataType}:`, error);
        return { success: false, message: `Failed to load ${dataType}` };
    }
}

// âœ… SIDEBAR MENU FUNCTIONALITY
function setupSidebarMenu() {
    const sidebarLinks = document.querySelectorAll('.sidebar-menu a');
    
    sidebarLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Remove active class from all links
            sidebarLinks.forEach(l => l.classList.remove('active'));
            // Add active class to clicked link
            this.classList.add('active');
            
            const linkText = this.textContent.trim();
            console.log('Menu clicked:', linkText);
            
            // Load appropriate content based on menu item
            switch(linkText) {
                case 'Dashboard':
                    showDashboard();
                    break;
                case 'Academic Profile':
                    showAcademicProfile();
                    break;
                case 'Timetable':
                    showTimetable();
                    break;
                case 'Courses':
                    showCourses();
                    break;
                case 'Attendance':
                    showAttendance();
                    break;
                case 'Results':
                    showResults();
                    break;
                case 'Fees':
                    showFees();
                    break;
                case 'Library':
                    showLibrary();
                    break;
                case 'Settings':
                    showSettings();
                    break;
            }
        });
    });
}

// âœ… DASHBOARD VIEW
function showDashboard() {
    const dashboardMain = document.querySelector('.student-dashboard .dashboard-main');
    dashboardMain.innerHTML = `
        <div class="welcome-banner">
            <h2>Welcome, ${currentStudent?.name || 'Student'}!</h2>
            <p>Here you can access all your academic information, services, and resources in one place.</p>
        </div>

        <div class="dashboard-cards">
            <div class="card">
                <h3>ðŸŽ“ Academic Details</h3>
                <div class="info-group">
                    <label>Student ID</label>
                    <span id="academicStudentId">${currentStudent?.id || 'N/A'}</span>
                </div>
                <div class="info-group">
                    <label>Course</label>
                    <span id="academicCourse">${currentStudent?.course || 'N/A'}</span>
                </div>
                <div class="info-group">
                    <label>Semester</label>
                    <span id="academicSemester">${currentStudent?.semester || 'N/A'}</span>
                </div>
                <div class="info-group">
                    <label>Enrollment Date</label>
                    <span id="academicEnrollment">${currentStudent?.enrollmentDate || 'N/A'}</span>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ‘¤ Personal Details</h3>
                <div class="info-group">
                    <label>Full Name</label>
                    <span id="personalName">${currentStudent?.name || 'N/A'}</span>
                </div>
                <div class="info-group">
                    <label>Date of Birth</label>
                    <span id="personalDob">${currentStudent?.dob || 'N/A'}</span>
                </div>
                <div class="info-group">
                    <label>Email</label>
                    <span id="personalEmail">${currentStudent?.email || 'N/A'}</span>
                </div>
                <div class="info-group">
                    <label>Address</label>
                    <span id="personalAddress">${currentStudent?.address || 'N/A'}</span>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ“Š Attendance Summary</h3>
                <div class="info-group">
                    <label>Overall Attendance</label>
                    <span id="attendanceOverall">Loading...</span>
                </div>
                <div class="info-group">
                    <label>Present Days</label>
                    <span id="attendancePresent">Loading...</span>
                </div>
                <div class="info-group">
                    <label>Absent Days</label>
                    <span id="attendanceAbsent">Loading...</span>
                </div>
                <div class="info-group">
                    <label>Total Classes</label>
                    <span id="attendanceTotal">Loading...</span>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ“š Current Courses</h3>
                <div id="currentCoursesList">
                    <div class="info-group">
                        <span>Loading courses...</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>ðŸŽ¯ Academic Performance</h3>
                <div class="info-group">
                    <label>Current SGPA</label>
                    <span id="resultsSGPA">Loading...</span>
                </div>
                <div class="info-group">
                    <label>Overall CGPA</label>
                    <span id="resultsCGPA">Loading...</span>
                </div>
                <div class="info-group">
                    <label>Subjects Passed</label>
                    <span id="resultsPassed">Loading...</span>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ’° Fee Status</h3>
                <div class="info-group">
                    <label>Total Paid</label>
                    <span id="feesPaid">Loading...</span>
                </div>
                <div class="info-group">
                    <label>Total Due</label>
                    <span id="feesDue">Loading...</span>
                </div>
                <div class="info-group">
                    <label>Next Due Date</label>
                    <span id="feesNextDue">Loading...</span>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ“š Library Status</h3>
                <div class="info-group">
                    <label>Books Issued</label>
                    <span id="libraryIssued">Loading...</span>
                </div>
                <div class="info-group">
                    <label>Overdue Books</label>
                    <span id="libraryOverdue">Loading...</span>
                </div>
                <div class="info-group">
                    <label>Total Books</label>
                    <span id="libraryTotal">Loading...</span>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ“… Upcoming Events</h3>
                <div id="upcomingEventsList">
                    <div class="info-group">
                        <span>Loading events...</span>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    // Load dynamic data for dashboard
    loadDashboardData();
}

// âœ… LOAD DASHBOARD DATA
async function loadDashboardData() {
    if (!currentStudent) return;
    
    try {
        // Load all data in parallel
        const [attendance, courses, results, fees, library, events] = await Promise.all([
            fetchStudentData(currentStudent.id, 'Attendance'),
            fetchStudentData(currentStudent.id, 'Courses'),
            fetchStudentData(currentStudent.id, 'Results'),
            fetchStudentData(currentStudent.id, 'Fees'),
            fetchStudentData(currentStudent.id, 'Library'),
            fetchStudentData('', 'Events')
        ]);
        
        // Update attendance
        if (attendance.success) {
            document.getElementById('attendanceOverall').textContent = `${attendance.summary.percentage}%`;
            document.getElementById('attendancePresent').textContent = attendance.summary.present;
            document.getElementById('attendanceAbsent').textContent = attendance.summary.absent;
            document.getElementById('attendanceTotal').textContent = attendance.summary.total;
        }
        
        // Update courses
        if (courses.success && courses.data.length > 0) {
            const coursesList = document.getElementById('currentCoursesList');
            coursesList.innerHTML = '';
            courses.data.slice(0, 3).forEach(course => {
                coursesList.innerHTML += `
                    <div class="info-group">
                        <label>${course.courseName}</label>
                        <span>${course.instructor} (${course.credits} Cr)</span>
                    </div>
                `;
            });
            if (courses.data.length > 3) {
                coursesList.innerHTML += `<div class="info-group">
                    <label>And ${courses.data.length - 3} more courses...</label>
                </div>`;
            }
        }
        
        // Update results
        if (results.success) {
            document.getElementById('resultsSGPA').textContent = `${results.summary.sgpa}/10`;
            document.getElementById('resultsCGPA').textContent = `${results.summary.cgpa}/10`;
            document.getElementById('resultsPassed').textContent = `${results.summary.passedSubjects}/${results.summary.totalSubjects}`;
        }
        
        // Update fees
        if (fees.success) {
            document.getElementById('feesPaid').textContent = `â‚¹${fees.summary.totalPaid}`;
            document.getElementById('feesDue').textContent = `â‚¹${fees.summary.totalDue}`;
            document.getElementById('feesNextDue').textContent = fees.summary.nextDue;
        }
        
        // Update library
        if (library.success) {
            const issuedBooks = library.data.filter(book => book.status === 'Issued').length;
            const overdueBooks = library.data.filter(book => {
                return book.status === 'Issued' && book.dueDate && new Date(book.dueDate) < new Date();
            }).length;
            
            document.getElementById('libraryIssued').textContent = `${issuedBooks} books`;
            document.getElementById('libraryOverdue').textContent = `${overdueBooks} books`;
            document.getElementById('libraryTotal').textContent = `${library.data.length} books`;
        }
        
        // Update events
        if (events.success && events.data.length > 0) {
            const eventsList = document.getElementById('upcomingEventsList');
            eventsList.innerHTML = '';
            events.data.slice(0, 3).forEach(event => {
                eventsList.innerHTML += `
                    <div class="info-group">
                        <label>${event.title}</label>
                        <span>${event.date}</span>
                    </div>
                `;
            });
        }
        
    } catch (error) {
        console.error('Error loading dashboard data:', error);
    }
}

// âœ… ACADEMIC PROFILE PAGE
async function showAcademicProfile() {
    if (!currentStudent) return;
    
    const studentProfile = await fetchStudentData(currentStudent.id, 'StudentProfile');
    
    const dashboardMain = document.querySelector('.student-dashboard .dashboard-main');
    dashboardMain.innerHTML = `
        <div class="welcome-banner">
            <h2>Academic Profile</h2>
            <p>Complete academic information and personal details</p>
        </div>

        <div class="dashboard-cards">
            <div class="card">
                <h3>ðŸŽ“ Academic Information</h3>
                <div class="info-group">
                    <label>Student ID</label>
                    <span>${currentStudent.id}</span>
                </div>
                <div class="info-group">
                    <label>Full Name</label>
                    <span>${currentStudent.name}</span>
                </div>
                <div class="info-group">
                    <label>Course</label>
                    <span>${currentStudent.course}</span>
                </div>
                <div class="info-group">
                    <label>Current Semester</label>
                    <span>${currentStudent.semester}</span>
                </div>
                <div class="info-group">
                    <label>Enrollment Date</label>
                    <span>${currentStudent.enrollmentDate}</span>
                </div>
                <div class="info-group">
                    <label>Batch</label>
                    <span>2023-2026</span>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ‘¤ Personal Information</h3>
                <div class="info-group">
                    <label>Date of Birth</label>
                    <span>${currentStudent.dob}</span>
                </div>
                <div class="info-group">
                    <label>Email Address</label>
                    <span>${currentStudent.email}</span>
                </div>
                <div class="info-group">
                    <label>Phone Number</label>
                    <span>+91 XXXXXXX${currentStudent.id.slice(-3)}</span>
                </div>
                <div class="info-group">
                    <label>Address</label>
                    <span>${currentStudent.address}</span>
                </div>
                <div class="info-group">
                    <label>Gender</label>
                    <span>Male</span>
                </div>
                <div class="info-group">
                    <label>Blood Group</label>
                    <span>O+</span>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ« College Information</h3>
                <div class="info-group">
                    <label>College Name</label>
                    <span>Vidya Portal College</span>
                </div>
                <div class="info-group">
                    <label>Department</label>
                    <span>Computer Applications</span>
                </div>
                <div class="info-group">
                    <label>Class Advisor</label>
                    <span>Dr. Priya Mehta</span>
                </div>
                <div class="info-group">
                    <label>HOD</label>
                    <span>Dr. Sunil Kumar</span>
                </div>
                <div class="info-group">
                    <label>Academic Year</label>
                    <span>2025-2026</span>
                </div>
            </div>
        </div>
    `;
}

// âœ… TIMETABLE PAGE
async function showTimetable() {
    const dashboardMain = document.querySelector('.student-dashboard .dashboard-main');
    dashboardMain.innerHTML = `
        <div class="welcome-banner">
            <h2>Class Timetable</h2>
            <p>Weekly schedule for ${currentStudent?.semester || 'Current'} Semester</p>
        </div>

        <div class="table-container">
            <h3>ðŸ“… Weekly Schedule - ${currentStudent?.semester || '4th'} Semester</h3>
            <table>
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Monday</th>
                        <th>Tuesday</th>
                        <th>Wednesday</th>
                        <th>Thursday</th>
                        <th>Friday</th>
                        <th>Saturday</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>9:00 - 10:00</td>
                        <td>Database Management<br><small>Dr. Sharma</small></td>
                        <td>Java Programming<br><small>Prof. Gupta</small></td>
                        <td>Web Technologies<br><small>Dr. Patel</small></td>
                        <td>Mathematics<br><small>Dr. Kumar</small></td>
                        <td>Database Lab<br><small>Dr. Sharma</small></td>
                        <td>Project Work</td>
                    </tr>
                    <tr>
                        <td>10:00 - 11:00</td>
                        <td>Java Programming<br><small>Prof. Gupta</small></td>
                        <td>Web Technologies<br><small>Dr. Patel</small></td>
                        <td>Mathematics<br><small>Dr. Kumar</small></td>
                        <td>Database Management<br><small>Dr. Sharma</small></td>
                        <td>Java Lab<br><small>Prof. Gupta</small></td>
                        <td>Library</td>
                    </tr>
                    <tr>
                        <td>11:00 - 12:00</td>
                        <td colspan="6" style="text-align: center; background: #ffeaa7;">BREAK</td>
                    </tr>
                    <tr>
                        <td>12:00 - 1:00</td>
                        <td>Web Technologies<br><small>Dr. Patel</small></td>
                        <td>Mathematics<br><small>Dr. Kumar</small></td>
                        <td>Database Management<br><small>Dr. Sharma</small></td>
                        <td>Java Programming<br><small>Prof. Gupta</small></td>
                        <td>Web Lab<br><small>Dr. Patel</small></td>
                        <td>Sports</td>
                    </tr>
                    <tr>
                        <td>1:00 - 2:00</td>
                        <td>Mathematics<br><small>Dr. Kumar</small></td>
                        <td>Database Management<br><small>Dr. Sharma</small></td>
                        <td>Java Programming<br><small>Prof. Gupta</small></td>
                        <td>Web Technologies<br><small>Dr. Patel</small></td>
                        <td>Seminar</td>
                        <td>Cultural</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="dashboard-cards">
            <div class="card">
                <h3>ðŸ“‹ Subject Details</h3>
                <div class="info-group">
                    <label>Database Management</label>
                    <span>Dr. Sharma | Mon, Thu | 9:00-10:00, 12:00-1:00</span>
                </div>
                <div class="info-group">
                    <label>Java Programming</label>
                    <span>Prof. Gupta | Tue, Fri | 10:00-11:00, 1:00-2:00</span>
                </div>
                <div class="info-group">
                    <label>Web Technologies</label>
                    <span>Dr. Patel | Wed, Sat | 11:00-12:00, 12:00-1:00</span>
                </div>
                <div class="info-group">
                    <label>Mathematics</label>
                    <span>Dr. Kumar | Thu, Fri | 9:00-10:00, 10:00-11:00</span>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ“ Lab Sessions</h3>
                <div class="info-group">
                    <label>Database Lab</label>
                    <span>Friday | 9:00-11:00 | Lab-201</span>
                </div>
                <div class="info-group">
                    <label>Java Lab</label>
                    <span>Tuesday | 10:00-12:00 | Lab-202</span>
                </div>
                <div class="info-group">
                    <label>Web Lab</label>
                    <span>Wednesday | 1:00-3:00 | Lab-203</span>
                </div>
            </div>
        </div>
    `;
}

// âœ… COURSES PAGE
async function showCourses() {
    const coursesData = await fetchStudentData(currentStudent.id, 'Courses');
    
    const dashboardMain = document.querySelector('.student-dashboard .dashboard-main');
    let coursesHTML = `
        <div class="welcome-banner">
            <h2>Course Details</h2>
            <p>All courses for ${currentStudent?.semester || 'Current'} Semester</p>
        </div>
    `;
    
    if (coursesData.success && coursesData.data.length > 0) {
        coursesHTML += `
            <div class="table-container">
                <h3>ðŸ“š Courses - ${coursesData.semester} Semester</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Course Code</th>
                            <th>Course Name</th>
                            <th>Instructor</th>
                            <th>Credits</th>
                            <th>Type</th>
                            <th>Schedule</th>
                        </tr>
                    </thead>
                    <tbody>
        `;
        
        coursesData.data.forEach(course => {
            coursesHTML += `
                <tr>
                    <td>${course.courseCode}</td>
                    <td><strong>${course.courseName}</strong></td>
                    <td>${course.instructor}</td>
                    <td>${course.credits}</td>
                    <td>Core Subject</td>
                    <td>Mon, Wed, Fri</td>
                </tr>
            `;
        });
        
        coursesHTML += `
                    </tbody>
                </table>
            </div>
        `;
    } else {
        coursesHTML += `
            <div class="card">
                <h3>No Courses Found</h3>
                <p>Course information is not available for the current semester.</p>
            </div>
        `;
    }
    
    // Add course materials section
    coursesHTML += `
        <div class="dashboard-cards">
            <div class="card">
                <h3>ðŸ“– Course Materials</h3>
                <div class="info-group">
                    <label>Database Management</label>
                    <span>
                        <button class="btn">Syllabus</button>
                        <button class="btn">Notes</button>
                        <button class="btn">Assignments</button>
                    </span>
                </div>
                <div class="info-group">
                    <label>Java Programming</label>
                    <span>
                        <button class="btn">Syllabus</button>
                        <button class="btn">Notes</button>
                        <button class="btn">Assignments</button>
                    </span>
                </div>
                <div class="info-group">
                    <label>Web Technologies</label>
                    <span>
                        <button class="btn">Syllabus</button>
                        <button class="btn">Notes</button>
                        <button class="btn">Assignments</button>
                    </span>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ“Š Course Progress</h3>
                <div class="info-group">
                    <label>Completed Topics</label>
                    <span>24/36 topics</span>
                </div>
                <div class="info-group">
                    <label>Assignments Submitted</label>
                    <span>8/12 assignments</span>
                </div>
                <div class="info-group">
                    <label>Upcoming Deadlines</label>
                    <span>2 assignments due this week</span>
                </div>
            </div>
        </div>
    `;
    
    dashboardMain.innerHTML = coursesHTML;
}

// âœ… ATTENDANCE PAGE
async function showAttendance() {
    const attendanceData = await fetchStudentData(currentStudent.id, 'Attendance');
    
    const dashboardMain = document.querySelector('.student-dashboard .dashboard-main');
    let attendanceHTML = `
        <div class="welcome-banner">
            <h2>Attendance Records</h2>
            <p>Detailed attendance history and statistics</p>
        </div>
    `;
    
    if (attendanceData.success) {
        attendanceHTML += `
            <div class="dashboard-cards">
                <div class="card">
                    <h3>ðŸ“ˆ Attendance Summary</h3>
                    <div class="info-group">
                        <label>Overall Percentage</label>
                        <span style="font-size: 24px; color: ${attendanceData.summary.percentage >= 75 ? 'green' : 'red'};">
                            ${attendanceData.summary.percentage}%
                        </span>
                    </div>
                    <div class="info-group">
                        <label>Present Days</label>
                        <span>${attendanceData.summary.present}</span>
                    </div>
                    <div class="info-group">
                        <label>Absent Days</label>
                        <span>${attendanceData.summary.absent}</span>
                    </div>
                    <div class="info-group">
                        <label>Total Classes</label>
                        <span>${attendanceData.summary.total}</span>
                    </div>
                </div>

                <div class="card">
                    <h3>ðŸŽ¯ Subject-wise Attendance</h3>
                    <div class="info-group">
                        <label>Database Management</label>
                        <span>92% (23/25 classes)</span>
                    </div>
                    <div class="info-group">
                        <label>Java Programming</label>
                        <span>88% (22/25 classes)</span>
                    </div>
                    <div class="info-group">
                        <label>Web Technologies</label>
                        <span>80% (20/25 classes)</span>
                    </div>
                    <div class="info-group">
                        <label>Mathematics</label>
                        <span>96% (24/25 classes)</span>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <h3>ðŸ“… Detailed Attendance History</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Subject</th>
                            <th>Status</th>
                            <th>Marked By</th>
                        </tr>
                    </thead>
                    <tbody>
        `;
        
        if (attendanceData.data.length > 0) {
            attendanceData.data.forEach(record => {
                attendanceHTML += `
                    <tr>
                        <td>${record.date}</td>
                        <td>${record.subject}</td>
                        <td>
                            <span style="color: ${record.status === 'Present' ? 'green' : 'red'}; font-weight: bold;">
                                ${record.status}
                            </span>
                        </td>
                        <td>${record.markedBy}</td>
                    </tr>
                `;
            });
        } else {
            attendanceHTML += `
                <tr>
                    <td colspan="4" style="text-align: center;">No attendance records found</td>
                </tr>
            `;
        }
        
        attendanceHTML += `
                    </tbody>
                </table>
            </div>
        `;
    } else {
        attendanceHTML += `
            <div class="card">
                <h3>Attendance Data Not Available</h3>
                <p>Unable to load attendance records at the moment.</p>
            </div>
        `;
    }
    
    dashboardMain.innerHTML = attendanceHTML;
}

// âœ… RESULTS PAGE
async function showResults() {
    const resultsData = await fetchStudentData(currentStudent.id, 'Results');
    
    const dashboardMain = document.querySelector('.student-dashboard .dashboard-main');
    let resultsHTML = `
        <div class="welcome-banner">
            <h2>Academic Results</h2>
            <p>Performance records and grade history</p>
        </div>
    `;
    
    if (resultsData.success) {
        resultsHTML += `
            <div class="dashboard-cards">
                <div class="card">
                    <h3>ðŸ“Š Performance Summary</h3>
                    <div class="info-group">
                        <label>Current SGPA</label>
                        <span style="font-size: 24px; color: green;">${resultsData.summary.sgpa}/10</span>
                    </div>
                    <div class="info-group">
                        <label>Overall CGPA</label>
                        <span style="font-size: 20px; color: blue;">${resultsData.summary.cgpa}/10</span>
                    </div>
                    <div class="info-group">
                        <label>Total Subjects</label>
                        <span>${resultsData.summary.totalSubjects}</span>
                    </div>
                    <div class="info-group">
                        <label>Passed Subjects</label>
                        <span>${resultsData.summary.passedSubjects}</span>
                    </div>
                </div>

                <div class="card">
                    <h3>ðŸ† Semester Performance</h3>
                    <div class="info-group">
                        <label>4th Semester (Current)</label>
                        <span>SGPA: ${resultsData.summary.sgpa}</span>
                    </div>
                    <div class="info-group">
                        <label>3rd Semester</label>
                        <span>SGPA: 8.4/10</span>
                    </div>
                    <div class="info-group">
                        <label>2nd Semester</label>
                        <span>SGPA: 8.2/10</span>
                    </div>
                    <div class="info-group">
                        <label>1st Semester</label>
                        <span>SGPA: 8.1/10</span>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <h3>ðŸ“ Subject-wise Marks</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>Semester</th>
                            <th>Marks Obtained</th>
                            <th>Total Marks</th>
                            <th>Grade</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
        `;
        
        if (resultsData.data.length > 0) {
            resultsData.data.forEach(result => {
                resultsHTML += `
                    <tr>
                        <td><strong>${result.subject}</strong></td>
                        <td>${result.semester}</td>
                        <td>${result.marks}</td>
                        <td>${result.totalMarks}</td>
                        <td>
                            <span style="color: ${result.grade === 'F' ? 'red' : 'green'}; font-weight: bold;">
                                ${result.grade}
                            </span>
                        </td>
                        <td>
                            <span class="status-badge ${result.marks >= 40 ? 'status-approved' : 'status-rejected'}">
                                ${result.marks >= 40 ? 'Passed' : 'Failed'}
                            </span>
                        </td>
                    </tr>
                `;
            });
        } else {
            resultsHTML += `
                <tr>
                    <td colspan="6" style="text-align: center;">No result records found</td>
                </tr>
            `;
        }
        
        resultsHTML += `
                    </tbody>
                </table>
            </div>
        `;
    } else {
        resultsHTML += `
            <div class="card">
                <h3>Results Not Available</h3>
                <p>Unable to load result information at the moment.</p>
            </div>
        `;
    }
    
    dashboardMain.innerHTML = resultsHTML;
}

// âœ… FEES PAGE
async function showFees() {
    const feesData = await fetchStudentData(currentStudent.id, 'Fees');
    
    const dashboardMain = document.querySelector('.student-dashboard .dashboard-main');
    let feesHTML = `
        <div class="welcome-banner">
            <h2>Fee Management</h2>
            <p>Fee payment history and upcoming dues</p>
        </div>
    `;
    
    if (feesData.success) {
        feesHTML += `
            <div class="dashboard-cards">
                <div class="card">
                    <h3>ðŸ’° Fee Summary</h3>
                    <div class="info-group">
                        <label>Total Amount Paid</label>
                        <span style="color: green; font-size: 20px;">â‚¹${feesData.summary.totalPaid}</span>
                    </div>
                    <div class="info-group">
                        <label>Total Due Amount</label>
                        <span style="color: ${feesData.summary.totalDue > 0 ? 'red' : 'green'}; font-size: 18px;">
                            â‚¹${feesData.summary.totalDue}
                        </span>
                    </div>
                    <div class="info-group">
                        <label>Next Due Date</label>
                        <span>${feesData.summary.nextDue}</span>
                    </div>
                    <div class="info-group">
                        <label>Next Due Amount</label>
                        <span>â‚¹${feesData.summary.nextAmount}</span>
                    </div>
                </div>

                <div class="card">
                    <h3>ðŸ’³ Quick Actions</h3>
                    <div style="text-align: center; padding: 20px;">
                        <button class="btn btn-success" style="margin: 10px; padding: 15px 30px;">
                            Pay Fees Online
                        </button>
                        <button class="btn" style="margin: 10px; padding: 15px 30px;">
                            Download Receipt
                        </button>
                        <button class="btn" style="margin: 10px; padding: 15px 30px;">
                            Fee Structure
                        </button>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <h3>ðŸ“‹ Fee Payment History</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Semester</th>
                            <th>Amount</th>
                            <th>Paid</th>
                            <th>Due</th>
                            <th>Due Date</th>
                            <th>Status</th>
                            <th>Payment Date</th>
                        </tr>
                    </thead>
                    <tbody>
        `;
        
        if (feesData.data.length > 0) {
            feesData.data.forEach(fee => {
                feesHTML += `
                    <tr>
                        <td>${fee.semester}</td>
                        <td>â‚¹${fee.amount}</td>
                        <td>â‚¹${fee.paid}</td>
                        <td style="color: ${fee.due > 0 ? 'red' : 'green'};">â‚¹${fee.due}</td>
                        <td>${fee.dueDate}</td>
                        <td>
                            <span class="status-badge ${fee.status === 'Paid' ? 'status-approved' : 'status-pending'}">
                                ${fee.status}
                            </span>
                        </td>
                        <td>${fee.paymentDate || 'N/A'}</td>
                    </tr>
                `;
            });
        } else {
            feesHTML += `
                <tr>
                    <td colspan="7" style="text-align: center;">No fee records found</td>
                </tr>
            `;
        }
        
        feesHTML += `
                    </tbody>
                </table>
            </div>
        `;
    } else {
        feesHTML += `
            <div class="card">
                <h3>Fee Information Not Available</h3>
                <p>Unable to load fee details at the moment.</p>
            </div>
        `;
    }
    
    dashboardMain.innerHTML = feesHTML;
}

// âœ… LIBRARY PAGE
async function showLibrary() {
    const libraryData = await fetchStudentData(currentStudent.id, 'Library');
    
    const dashboardMain = document.querySelector('.student-dashboard .dashboard-main');
    let libraryHTML = `
        <div class="welcome-banner">
            <h2>Library Management</h2>
            <p>Book issues, returns, and library history</p>
        </div>
    `;
    
    if (libraryData.success) {
        const issuedBooks = libraryData.data.filter(book => book.status === 'Issued');
        const returnedBooks = libraryData.data.filter(book => book.status === 'Returned');
        const overdueBooks = issuedBooks.filter(book => {
            return book.dueDate && new Date(book.dueDate) < new Date();
        });
        
        libraryHTML += `
            <div class="dashboard-cards">
                <div class="card">
                    <h3>ðŸ“š Library Summary</h3>
                    <div class="info-group">
                        <label>Books Currently Issued</label>
                        <span>${issuedBooks.length} books</span>
                    </div>
                    <div class="info-group">
                        <label>Overdue Books</label>
                        <span style="color: ${overdueBooks.length > 0 ? 'red' : 'green'};">
                            ${overdueBooks.length} books
                        </span>
                    </div>
                    <div class="info-group">
                        <label>Total Books Issued</label>
                        <span>${libraryData.data.length} books</span>
                    </div>
                    <div class="info-group">
                        <label>Fine Amount</label>
                        <span style="color: ${overdueBooks.length > 0 ? 'red' : 'green'};">
                            â‚¹${overdueBooks.length * 50}
                        </span>
                    </div>
                </div>

                <div class="card">
                    <h3>ðŸ” Quick Search</h3>
                    <div class="form-group">
                        <input type="text" placeholder="Search books by title, author, or ISBN" style="width: 100%; padding: 10px;">
                    </div>
                    <div style="text-align: center;">
                        <button class="btn" style="margin: 5px;">Search Books</button>
                        <button class="btn" style="margin: 5px;">Browse Catalog</button>
                        <button class="btn" style="margin: 5px;">E-Resources</button>
                    </div>
                </div>
            </div>

            <div class="table-container">
                <h3>ðŸ“– Currently Issued Books</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Book ID</th>
                            <th>Book Name</th>
                            <th>Author</th>
                            <th>Issue Date</th>
                            <th>Due Date</th>
                            <th>Days Left</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
        `;
        
        if (issuedBooks.length > 0) {
            issuedBooks.forEach(book => {
                const dueDate = new Date(book.dueDate);
                const today = new Date();
                const daysLeft = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
                
                libraryHTML += `
                    <tr>
                        <td>${book.bookId}</td>
                        <td><strong>${book.bookName}</strong></td>
                        <td>${book.author}</td>
                        <td>${book.issueDate}</td>
                        <td style="color: ${daysLeft < 0 ? 'red' : (daysLeft <= 3 ? 'orange' : 'green')};">
                            ${book.dueDate}
                        </td>
                        <td style="color: ${daysLeft < 0 ? 'red' : (daysLeft <= 3 ? 'orange' : 'green')};">
                            ${daysLeft < 0 ? `${Math.abs(daysLeft)} days overdue` : `${daysLeft} days`}
                        </td>
                        <td>
                            <button class="btn ${daysLeft < 0 ? 'btn-danger' : 'btn-success'}">
                                ${daysLeft < 0 ? 'Pay Fine' : 'Renew'}
                            </button>
                        </td>
                    </tr>
                `;
            });
        } else {
            libraryHTML += `
                <tr>
                    <td colspan="7" style="text-align: center;">No books currently issued</td>
                </tr>
            `;
        }
        
        libraryHTML += `
                    </tbody>
                </table>
            </div>

            <div class="table-container">
                <h3>ðŸ“š Book Issue History</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Book ID</th>
                            <th>Book Name</th>
                            <th>Author</th>
                            <th>Issue Date</th>
                            <th>Return Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
        `;
        
        if (libraryData.data.length > 0) {
            libraryData.data.forEach(book => {
                libraryHTML += `
                    <tr>
                        <td>${book.bookId}</td>
                        <td>${book.bookName}</td>
                        <td>${book.author}</td>
                        <td>${book.issueDate}</td>
                        <td>${book.returnDate || 'Not returned'}</td>
                        <td>
                            <span class="status-badge ${book.status === 'Issued' ? 'status-pending' : 'status-approved'}">
                                ${book.status}
                            </span>
                        </td>
                    </tr>
                `;
            });
        } else {
            libraryHTML += `
                <tr>
                    <td colspan="6" style="text-align: center;">No library history found</td>
                </tr>
            `;
        }
        
        libraryHTML += `
                    </tbody>
                </table>
            </div>
        `;
    } else {
        libraryHTML += `
            <div class="card">
                <h3>Library Data Not Available</h3>
                <p>Unable to load library information at the moment.</p>
            </div>
        `;
    }
    
    dashboardMain.innerHTML = libraryHTML;
}

// âœ… SETTINGS PAGE
function showSettings() {
    const dashboardMain = document.querySelector('.student-dashboard .dashboard-main');
    dashboardMain.innerHTML = `
        <div class="welcome-banner">
            <h2>Account Settings</h2>
            <p>Manage your profile and preferences</p>
        </div>

        <div class="dashboard-cards">
            <div class="card">
                <h3>ðŸ‘¤ Profile Settings</h3>
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" value="${currentStudent?.name || ''}" class="form-control">
                </div>
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" value="${currentStudent?.email || ''}" class="form-control">
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" value="+91 9876543210" class="form-control">
                </div>
                <div class="form-group">
                    <label>Address</label>
                    <textarea class="form-control">${currentStudent?.address || ''}</textarea>
                </div>
                <button class="btn btn-success">Update Profile</button>
            </div>

            <div class="card">
                <h3>ðŸ”’ Security Settings</h3>
                <div class="form-group">
                    <label>Current Password</label>
                    <input type="password" placeholder="Enter current password" class="form-control">
                </div>
                <div class="form-group">
                    <label>New Password</label>
                    <input type="password" placeholder="Enter new password" class="form-control">
                </div>
                <div class="form-group">
                    <label>Confirm New Password</label>
                    <input type="password" placeholder="Confirm new password" class="form-control">
                </div>
                <button class="btn">Change Password</button>
            </div>

            <div class="card">
                <h3>ðŸ”” Notification Preferences</h3>
                <div class="info-group">
                    <label>
                        <input type="checkbox" checked> Email Notifications
                    </label>
                </div>
                <div class="info-group">
                    <label>
                        <input type="checkbox" checked> SMS Alerts
                    </label>
                </div>
                <div class="info-group">
                    <label>
                        <input type="checkbox" checked> Assignment Reminders
                    </label>
                </div>
                <div class="info-group">
                    <label>
                        <input type="checkbox" checked> Fee Due Alerts
                    </label>
                </div>
                <button class="btn">Save Preferences</button>
            </div>

            <div class="card">
                <h3>ðŸ“± System Information</h3>
                <div class="info-group">
                    <label>Last Login</label>
                    <span>${new Date().toLocaleString()}</span>
                </div>
                <div class="info-group">
                    <label>Account Created</label>
                    <span>${currentStudent?.enrollmentDate || '2023-07-15'}</span>
                </div>
                <div class="info-group">
                    <label>System Version</label>
                    <span>VidyaPortal v2.1.0</span>
                </div>
                <div class="info-group">
                    <label>Browser</label>
                    <span>Chrome 128.0</span>
                </div>
            </div>
        </div>
    `;
}

// âœ… CORRECTED LOGIN FUNCTION
async function studentLogin(email, password) {
    try {
        const url = `${APPS_SCRIPT_URL}?action=login&email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`;
        console.log('Login URL:', url);
        
        const response = await fetch(url);
        const result = await response.json();
        console.log('Server Response:', result);
        return result;
        
    } catch (error) {
        console.error('Network Error:', error);
        return { 
            success: false, 
            message: 'Network error. Please check internet connection.' 
        };
    }
}

// âœ… IMPROVED LOAD STUDENT DASHBOARD - ALL DATA
async function loadStudentDashboard(studentData) {
    try {
        currentStudent = studentData;
        console.log('Loading complete dashboard for:', studentData);
        
        // Update basic student info
        document.querySelector('.student-dashboard .user-info h3').textContent = studentData.name;
        document.querySelector('.student-dashboard .user-info p').innerHTML = `ID: ${studentData.id}<br>Course: ${studentData.course}`;
        
        // Update welcome banner
        const welcomeBanner = document.querySelector('.student-dashboard .welcome-banner h2');
        if (welcomeBanner) {
            welcomeBanner.textContent = `Welcome, ${studentData.name}!`;
        }

        const welcomeText = document.querySelector('.student-dashboard .welcome-banner p');
        if (welcomeText) {
            welcomeText.textContent = `Here you can access all your academic information, services, and resources in one place.`;
        }

        // Update academic details (Card 1)
        const academicCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(1)');
        if (academicCard) {
            academicCard.innerHTML = `
                <h3>ðŸŽ“ Academic Details</h3>
                <div class="info-group">
                    <label>Student ID</label>
                    <span>${studentData.id}</span>
                </div>
                <div class="info-group">
                    <label>Course</label>
                    <span>${studentData.course}</span>
                </div>
                <div class="info-group">
                    <label>Semester</label>
                    <span>${studentData.semester}</span>
                </div>
                <div class="info-group">
                    <label>Enrollment Date</label>
                    <span>${studentData.enrollmentDate}</span>
                </div>
            `;
        }
        
        // Update personal details (Card 2)
        const personalCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(2)');
        if (personalCard) {
            personalCard.innerHTML = `
                <h3>ðŸ‘¤ Personal Details</h3>
                <div class="info-group">
                    <label>Full Name</label>
                    <span>${studentData.name}</span>
                </div>
                <div class="info-group">
                    <label>Date of Birth</label>
                    <span>${studentData.dob}</span>
                </div>
                <div class="info-group">
                    <label>Email</label>
                    <span>${studentData.email}</span>
                </div>
                <div class="info-group">
                    <label>Address</label>
                    <span>${studentData.address}</span>
                </div>
            `;
        }
        
        // âœ… LOAD ALL DYNAMIC DATA FROM GOOGLE SHEETS
        console.log('Loading all data for student:', studentData.id);
        await Promise.all([
            loadAttendanceData(studentData.id),
            loadCoursesData(studentData.id),
            loadResultsData(studentData.id),
            loadFeesData(studentData.id),
            loadLibraryData(studentData.id),
            loadEventsData()
        ]);
        
        // âœ… INITIALIZE SIDEBAR MENU
        setTimeout(() => {
            setupSidebarMenu();
        }, 100);
        
        console.log('Complete dashboard loaded successfully!');
        
    } catch (error) {
        console.error('Dashboard loading error:', error);
    }
}

// âœ… LOAD ATTENDANCE DATA
async function loadAttendanceData(studentId) {
    const result = await fetchStudentData(studentId, 'Attendance');
    
    if (result.success) {
        const attendanceCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(3)');
        if (attendanceCard) {
            attendanceCard.innerHTML = `
                <h3>ðŸ“Š Attendance Summary</h3>
                <div class="info-group">
                    <label>Overall Attendance</label>
                    <span style="color: ${result.summary.percentage >= 75 ? 'green' : 'red'}; font-weight: bold;">
                        ${result.summary.percentage}%
                    </span>
                </div>
                <div class="info-group">
                    <label>Present Days</label>
                    <span>${result.summary.present}</span>
                </div>
                <div class="info-group">
                    <label>Absent Days</label>
                    <span>${result.summary.absent}</span>
                </div>
                <div class="info-group">
                    <label>Total Classes</label>
                    <span>${result.summary.total}</span>
                </div>
                <button class="btn" onclick="showDetailedAttendance('${studentId}')">View Detailed Report</button>
            `;
        }
    } else {
        // Fallback data
        const attendanceCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(3)');
        if (attendanceCard) {
            attendanceCard.innerHTML = `
                <h3>ðŸ“Š Attendance Summary</h3>
                <div class="info-group">
                    <label>Overall Attendance</label>
                    <span style="color: green; font-weight: bold;">85%</span>
                </div>
                <div class="info-group">
                    <label>Present Days</label>
                    <span>102</span>
                </div>
                <div class="info-group">
                    <label>Absent Days</span>
                    <span>18</span>
                </div>
                <div class="info-group">
                    <label>Total Classes</label>
                    <span>120</span>
                </div>
                <button class="btn" onclick="showDetailedAttendance('${studentId}')">View Detailed Report</button>
            `;
        }
    }
}

// âœ… LOAD COURSES DATA
async function loadCoursesData(studentId) {
    const result = await fetchStudentData(studentId, 'Courses');
    
    if (result.success && result.data.length > 0) {
        const coursesCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(4)');
        if (coursesCard) {
            let coursesHTML = `<h3>ðŸ“š Current Courses (${result.semester})</h3>`;
            
            result.data.slice(0, 4).forEach(course => {
                coursesHTML += `
                    <div class="info-group">
                        <label>${course.courseName}</label>
                        <span>${course.instructor} (${course.credits} Cr)</span>
                    </div>
                `;
            });
            
            if (result.data.length > 4) {
                coursesHTML += `<div class="info-group">
                    <label>And ${result.data.length - 4} more courses...</label>
                </div>`;
            }
            
            coursesHTML += `<button class="btn" onclick="showAllCourses('${studentId}')">View All Courses</button>`;
            coursesCard.innerHTML = coursesHTML;
        }
    } else {
        // Fallback courses data
        const coursesCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(4)');
        if (coursesCard) {
            coursesCard.innerHTML = `
                <h3>ðŸ“š Current Courses (4th Semester)</h3>
                <div class="info-group">
                    <label>Database Management</label>
                    <span>Dr. Sharma (4 Cr)</span>
                </div>
                <div class="info-group">
                    <label>Java Programming</label>
                    <span>Prof. Gupta (4 Cr)</span>
                </div>
                <div class="info-group">
                    <label>Web Technologies</label>
                    <span>Dr. Patel (3 Cr)</span>
                </div>
                <div class="info-group">
                    <label>Mathematics</label>
                    <span>Dr. Kumar (3 Cr)</span>
                </div>
                <button class="btn" onclick="showAllCourses('${studentId}')">View All Courses</button>
            `;
        }
    }
}

// âœ… LOAD RESULTS DATA
async function loadResultsData(studentId) {
    const result = await fetchStudentData(studentId, 'Results');
    
    if (result.success) {
        const resultsCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(5)');
        if (resultsCard) {
            resultsCard.innerHTML = `
                <h3>ðŸŽ¯ Academic Performance</h3>
                <div class="info-group">
                    <label>Current SGPA</label>
                    <span style="color: green; font-weight: bold;">${result.summary.sgpa}/10</span>
                </div>
                <div class="info-group">
                    <label>Overall CGPA</label>
                    <span style="color: blue; font-weight: bold;">${result.summary.cgpa}/10</span>
                </div>
                <div class="info-group">
                    <label>Subjects Passed</label>
                    <span>${result.summary.passedSubjects}/${result.summary.totalSubjects}</span>
                </div>
                <div class="info-group">
                    <label>Last Semester</label>
                    <span>${result.data[0]?.semester || '4th'}</span>
                </div>
                <button class="btn" onclick="showDetailedResults('${studentId}')">View Detailed Marks</button>
            `;
        }
    } else {
        // Fallback results data
        const resultsCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(5)');
        if (resultsCard) {
            resultsCard.innerHTML = `
                <h3>ðŸŽ¯ Academic Performance</h3>
                <div class="info-group">
                    <label>Current SGPA</label>
                    <span style="color: green; font-weight: bold;">8.7/10</span>
                </div>
                <div class="info-group">
                    <label>Overall CGPA</label>
                    <span style="color: blue; font-weight: bold;">8.5/10</span>
                </div>
                <div class="info-group">
                    <label>Subjects Passed</label>
                    <span>24/24</span>
                </div>
                <div class="info-group">
                    <label>Last Semester</label>
                    <span>3rd Semester</span>
                </div>
                <button class="btn" onclick="showDetailedResults('${studentId}')">View Detailed Marks</button>
            `;
        }
    }
}

// âœ… LOAD FEES DATA
async function loadFeesData(studentId) {
    const result = await fetchStudentData(studentId, 'Fees');
    
    if (result.success) {
        const feesCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(6)');
        if (feesCard) {
            const statusColor = result.summary.totalDue > 0 ? 'red' : 'green';
            feesCard.innerHTML = `
                <h3>ðŸ’° Fee Status</h3>
                <div class="info-group">
                    <label>Total Paid</label>
                    <span style="color: green;">â‚¹${result.summary.totalPaid}</span>
                </div>
                <div class="info-group">
                    <label>Total Due</label>
                    <span style="color: ${statusColor}; font-weight: bold;">â‚¹${result.summary.totalDue}</span>
                </div>
                <div class="info-group">
                    <label>Next Due Date</label>
                    <span>${result.summary.nextDue}</span>
                </div>
                <div class="info-group">
                    <label>Next Amount</label>
                    <span>â‚¹${result.summary.nextAmount}</span>
                </div>
                <button class="btn" onclick="showDetailedFees('${studentId}')">View Fee History</button>
            `;
        }
    } else {
        // Fallback fees data
        const feesCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(6)');
        if (feesCard) {
            feesCard.innerHTML = `
                <h3>ðŸ’° Fee Status</h3>
                <div class="info-group">
                    <label>Total Paid</label>
                    <span style="color: green;">â‚¹100,000</span>
                </div>
                <div class="info-group">
                    <label>Total Due</label>
                    <span style="color: green; font-weight: bold;">â‚¹0</span>
                </div>
                <div class="info-group">
                    <label>Next Due Date</label>
                    <span>2026-02-15</span>
                </div>
                <div class="info-group">
                    <label>Next Amount</label>
                    <span>â‚¹25,000</span>
                </div>
                <button class="btn" onclick="showDetailedFees('${studentId}')">View Fee History</button>
            `;
        }
    }
}

// âœ… LOAD LIBRARY DATA
async function loadLibraryData(studentId) {
    const result = await fetchStudentData(studentId, 'Library');
    
    if (result.success) {
        const libraryCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(7)');
        if (libraryCard) {
            const issuedBooks = result.data.filter(book => book.status === 'Issued').length;
            const overdueBooks = result.data.filter(book => {
                if (book.status === 'Issued' && book.dueDate) {
                    return new Date(book.dueDate) < new Date();
                }
                return false;
            }).length;

            libraryCard.innerHTML = `
                <h3>ðŸ“š Library Status</h3>
                <div class="info-group">
                    <label>Books Issued</label>
                    <span>${issuedBooks} books</span>
                </div>
                <div class="info-group">
                    <label>Overdue Books</label>
                    <span style="color: ${overdueBooks > 0 ? 'red' : 'green'};">${overdueBooks} books</span>
                </div>
                <div class="info-group">
                    <label>Total Books</label>
                    <span>${result.data.length} books</span>
                </div>
                <div class="info-group">
                    <label>Last Activity</label>
                    <span>${result.data[0]?.issueDate || '2025-09-20'}</span>
                </div>
                <button class="btn" onclick="showLibraryDetails('${studentId}')">View Library Details</button>
            `;
        }
    } else {
        // Fallback library data
        const libraryCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(7)');
        if (libraryCard) {
            libraryCard.innerHTML = `
                <h3>ðŸ“š Library Status</h3>
                <div class="info-group">
                    <label>Books Issued</label>
                    <span>2 books</span>
                </div>
                <div class="info-group">
                    <label>Overdue Books</label>
                    <span style="color: green;">0 books</span>
                </div>
                <div class="info-group">
                    <label>Total Books</label>
                    <span>3 books</span>
                </div>
                <div class="info-group">
                    <label>Last Activity</label>
                    <span>2025-09-20</span>
                </div>
                <button class="btn" onclick="showLibraryDetails('${studentId}')">View Library Details</button>
            `;
        }
    }
}

// âœ… LOAD EVENTS DATA
async function loadEventsData() {
    try {
        const url = `${APPS_SCRIPT_URL}?action=getEvents`;
        const response = await fetch(url);
        const result = await response.json();
        
        if (result.success && result.data.length > 0) {
            const eventsCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(8)');
            if (eventsCard) {
                let eventsHTML = `<h3>ðŸ“… Upcoming Events</h3>`;
                
                // Show next 3 events
                result.data.slice(0, 3).forEach(event => {
                    const eventDate = new Date(event.date);
                    const today = new Date();
                    const daysLeft = Math.ceil((eventDate - today) / (1000 * 60 * 60 * 24));
                    
                    eventsHTML += `
                        <div class="info-group">
                            <label>${event.title}</label>
                            <span>${event.date} (${daysLeft > 0 ? `${daysLeft} days left` : 'Today'})</span>
                        </div>
                    `;
                });
                
                if (result.data.length > 3) {
                    eventsHTML += `<div class="info-group">
                        <label>And ${result.data.length - 3} more events...</label>
                    </div>`;
                }
                
                eventsHTML += `<button class="btn" onclick="showAllEvents()">View All Events</button>`;
                eventsCard.innerHTML = eventsHTML;
            }
        }
    } catch (error) {
        console.error('Error loading events:', error);
        // Fallback events data
        const eventsCard = document.querySelector('.student-dashboard .dashboard-cards .card:nth-child(8)');
        if (eventsCard) {
            eventsCard.innerHTML = `
                <h3>ðŸ“… Upcoming Events</h3>
                <div class="info-group">
                    <label>Mid-Term Exams</label>
                    <span>2025-10-25 (9 days left)</span>
                </div>
                <div class="info-group">
                    <label>College Fest</label>
                    <span>2025-10-15 (2 days left)</span>
                </div>
                <div class="info-group">
                    <label>Project Submission</label>
                    <span>2025-11-05 (25 days left)</span>
                </div>
                <button class="btn" onclick="showAllEvents()">View All Events</button>
            `;
        }
    }
}

// âœ… DETAILED VIEW FUNCTIONS
function showDetailedAttendance(studentId) {
    showAttendance(); // Redirect to attendance page
}

function showDetailedResults(studentId) {
    showResults(); // Redirect to results page
}

function showDetailedFees(studentId) {
    showFees(); // Redirect to fees page
}

function showAllCourses(studentId) {
    showCourses(); // Redirect to courses page
}

function showLibraryDetails(studentId) {
    showLibrary(); // Redirect to library page
}

function showAllEvents() {
    alert('All events view will open in a new page');
}

// âœ… MAIN LOGIN FUNCTIONALITY
document.addEventListener('DOMContentLoaded', function() {
    const loginLink = document.querySelector('.login-link');
    const loginContainer = document.getElementById('loginContainer');
    const closeLogin = document.getElementById('closeLogin');
    const loginForm = document.getElementById('loginForm');
    const collegeWebsite = document.getElementById('college-website');
    const studentDashboard = document.getElementById('studentDashboard');
    const facultyDashboard = document.getElementById('facultyDashboard');
    const adminDashboard = document.getElementById('adminDashboard');
    const backToHomeStudent = document.getElementById('backToHomeStudent');
    const backToHomeFaculty = document.getElementById('backToHomeFaculty');
    const backToHomeAdmin = document.getElementById('backToHomeAdmin');
    const studentLogoutBtn = document.getElementById('studentLogoutBtn');
    const facultyLogoutBtn = document.getElementById('facultyLogoutBtn');
    const adminLogoutBtn = document.getElementById('adminLogoutBtn');
    
    // Show login form
    loginLink.addEventListener('click', function(e) {
        e.preventDefault();
        loginContainer.style.display = 'flex';
    });
    
    // Close login form
    closeLogin.addEventListener('click', function() {
        loginContainer.style.display = 'none';
    });
    
    loginContainer.addEventListener('click', function(e) {
        if (e.target === loginContainer) {
            loginContainer.style.display = 'none';
        }
    });
    
    // âœ… LOGIN FORM SUBMISSION
    loginForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const userType = document.getElementById('user-type').value;
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        
        if (!userType || !username || !password) {
            alert('Please fill all fields');
            return;
        }
        
        if (userType === 'student') {
            try {
                // Show loading
                const loginBtn = document.querySelector('.login-btn');
                const originalText = loginBtn.textContent;
                loginBtn.textContent = 'Logging in...';
                loginBtn.disabled = true;
                
                console.log('Attempting login with:', { username, password });
                
                // Call Google Apps Script
                const loginResult = await studentLogin(username, password);
                console.log('Login Result:', loginResult);
                
                if (loginResult && loginResult.success) {
                    // Success - show dashboard
                    loginContainer.style.display = 'none';
                    collegeWebsite.style.display = 'none';
                    studentDashboard.style.display = 'block';
                    
                    // Load student data
                    await loadStudentDashboard(loginResult.studentData);
                    alert('Login successful! Welcome ' + loginResult.studentData.name);
                    
                } else {
                    const errorMessage = loginResult ? loginResult.message : 'Unknown error occurred';
                    alert('Login failed: ' + errorMessage);
                }
                
            } catch (error) {
                console.error('Login error:', error);
                alert('Error: ' + error.message);
            } finally {
                // Reset button
                const loginBtn = document.querySelector('.login-btn');
                loginBtn.textContent = 'Login';
                loginBtn.disabled = false;
            }
        } else {
            // Faculty/Admin (demo)
            loginContainer.style.display = 'none';
            collegeWebsite.style.display = 'none';
            if (userType === 'faculty') {
                facultyDashboard.style.display = 'block';
                alert('Faculty login successful! (Demo)');
            } else if (userType === 'admin') {
                adminDashboard.style.display = 'block';
                alert('Admin login successful! (Demo)');
            }
        }
        
        loginForm.reset();
    });
    
    // Back to home buttons
    backToHomeStudent.addEventListener('click', function() {
        studentDashboard.style.display = 'none';
        collegeWebsite.style.display = 'block';
        currentStudent = null;
    });
    
    backToHomeFaculty.addEventListener('click', function() {
        facultyDashboard.style.display = 'none';
        collegeWebsite.style.display = 'block';
    });
    
    backToHomeAdmin.addEventListener('click', function() {
        adminDashboard.style.display = 'none';
        collegeWebsite.style.display = 'block';
    });
    
    // Logout buttons
    studentLogoutBtn.addEventListener('click', function(e) {
        e.preventDefault();
        studentDashboard.style.display = 'none';
        collegeWebsite.style.display = 'block';
        currentStudent = null;
        alert('Logged out successfully!');
    });
    
    facultyLogoutBtn.addEventListener('click', function(e) {
        e.preventDefault();
        facultyDashboard.style.display = 'none';
        collegeWebsite.style.display = 'block';
        alert('Logged out successfully!');
    });
    
    adminLogoutBtn.addEventListener('click', function(e) {
        e.preventDefault();
        adminDashboard.style.display = 'none';
        collegeWebsite.style.display = 'block';
        alert('Logged out successfully!');
    });
    
    // Tab functionality
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = tab.getAttribute('data-tab');
            
            tabs.forEach(t => t.classList.remove('active'));
            tabContents.forEach(c => c.classList.remove('active'));
            
            tab.classList.add('active');
            document.getElementById(target).classList.add('active');
        });
    });
    
    // Auto-fill demo credentials
    setTimeout(function() {
        document.getElementById('user-type').value = 'student';
        document.getElementById('username').value = 'rahul@vidya.com';
        document.getElementById('password').value = 'pass123';
    }, 1000);
});

// âœ… TEST SERVER CONNECTION
async function testServerConnection() {
    try {
        const response = await fetch(`${APPS_SCRIPT_URL}?action=test`);
        const result = await response.json();
        console.log('Server test result:', result);
        return result;
    } catch (error) {
        console.error('Server test failed:', error);
        return null;
    }
}

// Test server connection on page load
window.addEventListener('load', function() {
    setTimeout(() => {
        testServerConnection();
    }, 2000);
});
</script>
</body>
</html>